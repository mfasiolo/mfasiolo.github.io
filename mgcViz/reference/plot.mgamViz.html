<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plotting multiple quantile GAMs — plot.mgamViz • mgcViz</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Plotting multiple quantile GAMs — plot.mgamViz" />

<meta property="og:description" content="This function is similar to plot.gamViz, but it is used
to plot multiple quantile GAM models fitted using mqgamV or mqgam.
It allows plotting standards 1D and 2D smooths, and parametric effects,
It is basically a wrapper around plotting methods that are specific to
individual smooth effect classes (such as plot.multi.mgcv.smooth.1D)." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mgcViz</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/mgcviz.html">mgcViz: visual tools for GAMs</a>
    </li>
    <li>
      <a href="../articles/miscellanea.html">Miscellanea: things you can do in mgcViz</a>
    </li>
    <li>
      <a href="../articles/qgam_mgcViz.html">Quantile additive models using qgam and mgcViz</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mfasiolo/mgcViz">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plotting multiple quantile GAMs</h1>
    <small class="dont-index">Source: <a href='https://github.com/mfasiolo/mgcViz/blob/master/R/plot_mgamViz.R'><code>R/plot_mgamViz.R</code></a></small>
    <div class="hidden name"><code>plot.mgamViz.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function is similar to <a href='plot.gamViz.html'>plot.gamViz</a>, but it is used
to plot multiple quantile GAM models fitted using <a href='mqgamV.html'>mqgamV</a> or mqgam.
It allows plotting standards 1D and 2D smooths, and parametric effects,
It is basically a wrapper around plotting methods that are specific to
individual smooth effect classes (such as <a href='plot.mgcv.smooth.1D.html'>plot.multi.mgcv.smooth.1D</a>).</p>
    
    </div>

    <pre class="usage"><span class='co'># S3 method for mgamViz</span>
<span class='fu'>plot</span>(<span class='no'>x</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>n2</span> <span class='kw'>=</span> <span class='fl'>40</span>, <span class='kw'>select</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>allTerms</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>an object of class <code>mgamViz</code>, the output of a <a href='getViz.html'>getViz</a> call.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>number of points used for each 1-d plot. For a nice smooth plot
this needs to be several times the estimated degrees of freedom for the smooth.</p></td>
    </tr>
    <tr>
      <th>n2</th>
      <td><p>square root of number of grid points used for plotting 2D functions effects
using contours or heatmaps.</p></td>
    </tr>
    <tr>
      <th>select</th>
      <td><p>allows plotting a subset of model terms. For instance, if you just want the plot
for the second smooth term, set <code>select = 2</code>. Parametric effects always come
after smooth or random effects.</p></td>
    </tr>
    <tr>
      <th>allTerms</th>
      <td><p>if <code>TRUE</code> also the parametric effects will be plotted.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other parameters, such as <code>maxpo</code> or <code>trans</code>, to be passed to the specific
plotting methods for each effect (e.g. to <a href='plot.mgcv.smooth.1D.html'>plot.multi.mgcv.smooth.1D</a>).</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>c("plotGam", "gg")</code>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>library</span>(<span class='no'>mgcViz</span>)
<span class='fu'>set.seed</span>(<span class='fl'>2</span>) <span class='co'>## simulate some data...</span>
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>gamSim</span>(<span class='fl'>1</span>,<span class='kw'>n</span><span class='kw'>=</span><span class='fl'>500</span>,<span class='kw'>dist</span><span class='kw'>=</span><span class='st'>"normal"</span>,<span class='kw'>scale</span><span class='kw'>=</span><span class='fl'>2</span>)</div><div class='output co'>#&gt; Gu &amp; Wahba 4 term additive model</div><div class='input'><span class='no'>dat</span>$<span class='no'>logi</span> <span class='kw'>&lt;-</span> <span class='fu'>as.logical</span>( <span class='fu'>sample</span>(<span class='fu'>c</span>(<span class='fl'>TRUE</span>, <span class='fl'>FALSE</span>), <span class='fu'>nrow</span>(<span class='no'>dat</span>), <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) )

<span class='no'>dat</span>$<span class='no'>fac</span> <span class='kw'>&lt;-</span> <span class='fu'>as.factor</span>( <span class='fu'>sample</span>(<span class='fu'>c</span>(<span class='st'>"A1"</span>, <span class='st'>"A2"</span>, <span class='st'>"A3"</span>), <span class='fu'>nrow</span>(<span class='no'>dat</span>), <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) )

<span class='co'># Fit GAM and get gamViz object</span>
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='mqgamV.html'>mqgamV</a></span>(<span class='no'>y</span> ~ <span class='no'>fac</span> + <span class='fu'>s</span>(<span class='no'>x0</span>) + <span class='fu'>s</span>(<span class='no'>x1</span>, <span class='no'>x2</span>) + <span class='no'>x3</span> + <span class='no'>logi</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>dat</span>,
              <span class='kw'>qu</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.2</span>, <span class='fl'>0.4</span>, <span class='fl'>0.6</span>, <span class='fl'>0.8</span>))</div><div class='output co'>#&gt; Estimating learning rate. Each dot corresponds to a loss evaluation. 
#&gt; qu = 0.4................done 
#&gt; qu = 0.6........done 
#&gt; qu = 0.2.........done 
#&gt; qu = 0.8................done </div><div class='input'>
<span class='fu'>print</span>(<span class='fu'>plot</span>(<span class='no'>fit</span>, <span class='kw'>select</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>4</span>, <span class='kw'>allTerms</span> <span class='kw'>=</span> <span class='no'>T</span>), <span class='kw'>pages</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='img'><img src='plot.mgamViz-1.png' alt='' width='700' height='433' /></div><div class='input'>
</div><span class='co'># NOT RUN {</span>
<span class='co'># Example where we are fitting the same model to different datasets, but</span>
<span class='co'># plotting the estimate effects together </span>
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>()
<span class='kw'>for</span>(<span class='no'>ii</span> <span class='kw'>in</span> <span class='fl'>1</span>:<span class='fl'>4</span>){
  <span class='co'># Simulate 4 datasets, we are adding 2 factor variables "fac" and "ref" just</span>
  <span class='co'># for illustrating the plotting method (the two factors have no effect on y)</span>
  <span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fl'>1000</span>
  <span class='no'>dat</span><span class='kw'>[[</span><span class='no'>ii</span>]] <span class='kw'>&lt;-</span> <span class='fu'>gamSim</span>(<span class='fl'>1</span>,<span class='kw'>n</span><span class='kw'>=</span><span class='no'>n</span>,<span class='kw'>dist</span><span class='kw'>=</span><span class='st'>"normal"</span>,<span class='kw'>scale</span><span class='kw'>=</span><span class='fl'>2</span>)
  <span class='no'>dat</span><span class='kw'>[[</span><span class='no'>ii</span>]]$<span class='no'>fac</span> <span class='kw'>&lt;-</span> <span class='fu'>as.factor</span>( <span class='fu'>sample</span>(<span class='fu'>c</span>(<span class='st'>"A1"</span>, <span class='st'>"A2"</span>, <span class='st'>"A3"</span>), <span class='no'>n</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) )
  <span class='no'>dat</span><span class='kw'>[[</span><span class='no'>ii</span>]]$<span class='no'>ref</span> <span class='kw'>&lt;-</span> <span class='fu'>as.factor</span>( <span class='fu'>sample</span>(<span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>10</span>], <span class='no'>n</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) )
}

<span class='co'># Estimating model on each dataset</span>
<span class='no'>mods</span> <span class='kw'>&lt;-</span> <span class='fu'>list</span>()
<span class='kw'>for</span>(<span class='no'>ii</span> <span class='kw'>in</span> <span class='fl'>1</span>:<span class='fl'>4</span>){
  <span class='no'>mods</span><span class='kw'>[[</span><span class='no'>ii</span>]] <span class='kw'>&lt;-</span> <span class='fu'><a href='gamV.html'>gamV</a></span>(<span class='no'>y</span>~<span class='fu'>s</span>(<span class='no'>x0</span>)+<span class='fu'>s</span>(<span class='no'>x1</span>, <span class='no'>x2</span>)+<span class='no'>x3</span>+<span class='no'>fac</span>+<span class='fu'>s</span>(<span class='no'>ref</span>, <span class='kw'>bs</span> <span class='kw'>=</span> <span class='st'>"re"</span>), <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>dat</span><span class='kw'>[[</span><span class='no'>ii</span>]])
}

<span class='co'># Names will be used to identify the four models we have fitted </span>
<span class='fu'>names</span>(<span class='no'>mods</span>) <span class='kw'>&lt;-</span> <span class='fu'>c</span>(<span class='st'>"M1"</span>, <span class='st'>"M2"</span>, <span class='st'>"M3"</span>, <span class='st'>"M4"</span>)
<span class='co'># Plotting on the same plots</span>
<span class='fu'>print</span>(<span class='fu'>plot.mgamViz</span>(<span class='no'>mods</span>, <span class='kw'>allTerms</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>), <span class='kw'>pages</span> <span class='kw'>=</span> <span class='fl'>1</span>)
<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Matteo Fasiolo, Raphael Nedellec.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>


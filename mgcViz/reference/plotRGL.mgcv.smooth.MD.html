<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Visualizing a 2D slice of a smooth effects in 3D — plotRGL.mgcv.smooth.MD • mgcViz</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Visualizing a 2D slice of a smooth effects in 3D — plotRGL.mgcv.smooth.MD" />
<meta property="og:description" content="This method plots an interactive 3D representation of a 2-dimensional
slice of a multi-dimensional smooth effect, using the rgl package." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mgcViz</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/BayesPost.html">Bayesian posterior simulations and predictive checks</a>
    </li>
    <li>
      <a href="../articles/mgcviz.html">An introduction to mgcViz: visual tools for GAMs</a>
    </li>
    <li>
      <a href="../articles/miscellanea.html">Miscellanea: things you can do in mgcViz</a>
    </li>
    <li>
      <a href="../articles/qgam_mgcViz.html">Quantile additive models using qgam and mgcViz</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mfasiolo/mgcViz">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Visualizing a 2D slice of a smooth effects in 3D</h1>
    <small class="dont-index">Source: <a href='https://github.com/mfasiolo/mgcViz/blob/master/R/plotRGL_mgcv_smooth_MD.R'><code>R/plotRGL_mgcv_smooth_MD.R</code></a></small>
    <div class="hidden name"><code>plotRGL.mgcv.smooth.MD.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This method plots an interactive 3D representation of a 2-dimensional
slice of a multi-dimensional smooth effect, using the rgl package.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for mgcv.smooth.MD</span>
<span class='fu'><a href='plotRGL.html'>plotRGL</a></span>(
  <span class='no'>x</span>,
  <span class='no'>fix</span>,
  <span class='kw'>se</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>40</span>,
  <span class='kw'>residuals</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>"auto"</span>,
  <span class='kw'>maxpo</span> <span class='kw'>=</span> <span class='fl'>1000</span>,
  <span class='kw'>too.far</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>NA</span>),
  <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>main</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>xlim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>ylim</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>se.mult</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>trans</span> <span class='kw'>=</span> <span class='no'>identity</span>,
  <span class='kw'>seWithMean</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>unconditional</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='no'>...</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a smooth effect object, extracted using <a href='sm.html'>mgcViz::sm</a>.</p></td>
    </tr>
    <tr>
      <th>fix</th>
      <td><p>a named vector indicating which variables must be kept fixed and to what values.
When plotting a smooth in (d+2) dimensions, then d variables must be fixed.</p></td>
    </tr>
    <tr>
      <th>se</th>
      <td><p>when TRUE (default) upper and lower surfaces are added to the plot at <code>se.mult</code>
(see below) standard deviations for the fitted surface.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>sqrt of the number of grid points used to compute the effect plot.</p></td>
    </tr>
    <tr>
      <th>residuals</th>
      <td><p>if TRUE, then the partial residuals will be added.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>the type of residuals that should be plotted. See <a href='residuals.gamViz.html'>residuals.gamViz</a>.</p></td>
    </tr>
    <tr>
      <th>maxpo</th>
      <td><p>maximum number of residuals points that will be plotted.
If number of datapoints &gt; <code>maxpo</code>, then a subsample of <code>maxpo</code> points will be taken.</p></td>
    </tr>
    <tr>
      <th>too.far</th>
      <td><p>a numeric vector with two entries. The first has the same interpretation
as in <a href='plot.mgcv.smooth.2D.html'>plot.mgcv.smooth.2D</a> and it avoids plotting the smooth effect
in areas that are too far form any observation. The distance will be calculated only
using the variables which are not in <code>fix</code> (see above). Hence in two dimensions,
not in the full d+2 dimensions. Set it to -1 to plot the whole
smooth. The second entry determines which residuals and covariates pairs are closed
enough to the selected slice. If left to <code>NA</code> on the 10\<!-- % of points which are -->
closest (in terms of scaled Euclidean distance) to the current slice will be plotted.
Set it to -1 to plot all the residuals.</p></td>
    </tr>
    <tr>
      <th>xlab</th>
      <td><p>if supplied then this will be used as the x label of the plot.</p></td>
    </tr>
    <tr>
      <th>ylab</th>
      <td><p>if supplied then this will be used as the y label of the plot.</p></td>
    </tr>
    <tr>
      <th>main</th>
      <td><p>used as title for the plot if supplied.</p></td>
    </tr>
    <tr>
      <th>xlim</th>
      <td><p>if supplied then this pair of numbers are used as the x limits for the plot.</p></td>
    </tr>
    <tr>
      <th>ylim</th>
      <td><p>if supplied then this pair of numbers are used as the y limits for the plot.</p></td>
    </tr>
    <tr>
      <th>se.mult</th>
      <td><p>a positive number which will be the multiplier of the standard errors
when calculating standard error surfaces.</p></td>
    </tr>
    <tr>
      <th>trans</th>
      <td><p>monotonic function to apply to the smooth and residuals, before plotting.
Monotonicity is not checked.</p></td>
    </tr>
    <tr>
      <th>seWithMean</th>
      <td><p>if TRUE the component smooths are shown with confidence intervals that
include the uncertainty about the overall mean. If FALSE then the uncertainty
relates purely to the centred smooth itself. Marra and Wood (2012) suggests
that TRUE results in better coverage performance, and this is also suggested
by simulation.</p></td>
    </tr>
    <tr>
      <th>unconditional</th>
      <td><p>if <code>TRUE</code> then the smoothing parameter uncertainty corrected covariance
matrix is used to compute uncertainty bands, if available.
Otherwise the bands treat the smoothing parameters as fixed.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>currently unused.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns <code>NULL</code> invisibly.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Marra, G and S.N. Wood (2012) Coverage Properties of Confidence Intervals for
Generalized Additive Model Components. Scandinavian Journal of Statistics.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Example 1: taken from ?mgcv::te, shows how tensor pruduct deals nicely with </span>
<span class='co'># badly scaled covariates (range of x 5% of range of z )</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>mgcViz</span>)
<span class='no'>n</span> <span class='kw'>&lt;-</span> <span class='fl'>1e3</span>
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='no'>n</span>); <span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='no'>n</span>); <span class='no'>z</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='no'>n</span>)

<span class='no'>ob</span> <span class='kw'>&lt;-</span> (<span class='no'>x</span>-<span class='no'>z</span>)^<span class='fl'>2</span> + (<span class='no'>y</span>-<span class='no'>z</span>)^<span class='fl'>2</span> + <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='no'>n</span>)
<span class='no'>b</span> <span class='kw'>&lt;-</span> <span class='fu'>gam</span>(<span class='no'>ob</span> ~ <span class='fu'>s</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>z</span>))
<span class='no'>v</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='getViz.html'>getViz</a></span>(<span class='no'>b</span>)

<span class='fu'><a href='plotRGL.html'>plotRGL</a></span>(<span class='fu'><a href='sm.html'>sm</a></span>(<span class='no'>v</span>, <span class='fl'>1</span>), <span class='kw'>fix</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"z"</span> <span class='kw'>=</span> <span class='fl'>0</span>))

<span class='fu'><a href='https://rdrr.io/pkg/rgl/man/rgl.open.html'>rgl.close</a></span>() <span class='co'># Close</span>

<span class='fu'><a href='plotRGL.html'>plotRGL</a></span>(<span class='fu'><a href='sm.html'>sm</a></span>(<span class='no'>v</span>, <span class='fl'>1</span>), <span class='kw'>fix</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"z"</span> <span class='kw'>=</span> <span class='fl'>1</span>), <span class='kw'>residuals</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># We can still work on the plot, for instance change the aspect ratio</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>rgl</span>)
<span class='fu'><a href='https://rdrr.io/pkg/rgl/man/aspect3d.html'>aspect3d</a></span>(<span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>1</span>)

<span class='fu'><a href='https://rdrr.io/pkg/rgl/man/rgl.open.html'>rgl.close</a></span>() <span class='co'># Close</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matteo Fasiolo, Raphael Nedellec.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


